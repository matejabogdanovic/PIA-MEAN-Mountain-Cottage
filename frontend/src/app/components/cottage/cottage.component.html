<div>
  <div class="flex flex-col">
    @if(showGalleryOverlay){
    <div class="fixed  inset-0  flex items-center justify-center flex-col bg-black/50">

      <button (click)="hidePhoto()" class="w-full !p-1 !bg-transparent !border-0 flex justify-center !text-white">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="size-10">
          <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 5.25 7.5 7.5 7.5-7.5m-15 6 7.5 7.5 7.5-7.5" />
        </svg>
      </button>
      <div class="flex items-center justify-center ">
        <button
          class="h-full flex items-center justify-end w-full !bg-transparent   !rounded-none !p-1   !border-0 !text-white "
          (click)="gallery(-1)">
          @if(cottage.slike.length>1){ <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="size-10">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>}
        </button>

        <img [src]="currentPhotoSrc" class="max-w-[80%] max-h-[80dvh] " alt="">
        <button
          class="h-full w-full flex items-center justify-start !bg-transparent  !rounded-none  !p-1   !border-0 !text-white"
          (click)="gallery(1)">
          @if(cottage.slike.length>1){<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="size-10">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
          </svg>}
        </button>
      </div>
    </div>}
    <div class="w-full h-[40dvh] rounded-md"
      [ngStyle]="{'background':'url('+currentPhotoSrc+') no-repeat center/cover'}">
      <div class="flex w-full h-full justify-between items-center px-2">
        @if(cottage.slike.length>1){<button class="!bg-white  !rounded-full !p-1   !border-0" (click)="gallery(-1)">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
          </svg>
        </button>}
        <div class="w-full h-full cursor-pointer" (click)="showPhoto()">

        </div>
        @if(cottage.slike.length>1){ <button class="!bg-white  !rounded-full !p-1   !border-0" (click)="gallery(1)"><svg
            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
            class="size-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
          </svg>
        </button>}
      </div>
    </div>



    <h1 class="page-title my-4">{{ cottage.naziv }}</h1>



    <div class="w-full flex flex-col justify-start">

      <hr class="border-neutral-500" />


      <div class="ml-auto">
        <div class="text-neutral-900">
          <span class="text-5xl font-bold">€{{ cottage.cenovnik[this.month] }}</span> <span class="font-semibold "> /
            night</span>
        </div>

      </div>
    </div>

    <div class="text-neutral-500 flex items-center gap-1">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="size-5 inline-block">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
      </svg>
      <span>{{ cottage.mesto }}</span>
    </div>
    <div class=" text-neutral-500">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5 " stroke="currentColor"
        class="size-5 inline-block ">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
      </svg>
      {{ cottage.telefon }}
    </div>
  </div>

  @if(cottage.usluge !== ''){
  <div>
    <h3 class="page-subtitle">Includes:</h3>
    <p>{{ cottage.usluge }}</p>
  </div>
  }

  <div>
    <h3 class="page-subtitle">Prices per month:</h3>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
      @for(cena of cottage.cenovnik; track $index){
      <div class="p-3 rounded-lg shadow-sm bg-white flex flex-col items-center"
        [ngClass]="$index===month?'border border-green-900':''">
        <span class="text-sm font-medium text-neutral-500">
          {{ monthNames[$index] }}
        </span>
        <span class="text-lg font-bold text-green-700">
          €{{ cena }}
        </span>
      </div>
      }
    </div>
  </div>
  <div>
    <h1 class="page-subtitle flex items-center justify-between">Reviews: <app-stars [ocena]="cottage.ocena"></app-stars>
    </h1>


    <hr class="border-neutral-500 my-2" />
    <div class="flex flex-col gap-2">
      @for( kom of komentari; track $index ){
      <div class="rounded-md shadow-md p-3 flex flex-col">
        <div><app-stars [ocena]="kom.komentar_i_ocena.ocena"></app-stars></div>

        <div>{{kom.komentar_i_ocena.komentar}}</div>
        <span class="text-neutral-500 self-end">{{ kom.updatedAtDate | date:'dd-MM-yyyy HH:mm' }}</span>
      </div>
      }
    </div>
  </div>
</div>